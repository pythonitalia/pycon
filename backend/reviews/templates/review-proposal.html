{% extends "admin/base_site.html" %}
{% load i18n markdownify %}
{% load localize countryname %}
{% block content %}

<style>
  * {
    box-sizing: border-box;
  }

  .review-row {
    display: grid;
    grid-template-columns: 100px 1fr;
    padding: 10px;
    font-size: 13px;
    border-bottom: 1px solid var(--hairline-color);
  }

  .my-vote {
    font-size: 20px;
    padding: 10px;
  }

  .my-vote input[type="radio"] {
    width: 20px;
    height: 20px;
  }

  .available-votes {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    margin-bottom: 10px;
  }

  .comments-wrapper-label {
    display: block;
    margin-bottom: 5px;
  }

  .comments-wrapper textarea {
    width: 100%;
  }

  .my-vote .actions {
    margin-top: 10px;
  }

  .my-vote .actions input {
    font-size: 16px;
  }

  .score-label {
    margin-bottom: 10px;
  }
</style>
<h1>{{proposal.title | localize:"en"}}</h1>
<fieldset class="module aligned">
  <h2>Submission</h2>

  <div class="review-row">
    <label>Languages</label>
    <div>{{proposal.languages.all|join:", "}}</div>
  </div>
  <div class="review-row">
    <label>Type</label>
    <div>{{proposal.type}}</div>
  </div>
  <div class="review-row">
    <label>Audience Level</label>
    <div>{{proposal.audience_level}}</div>
  </div>
  {% if has_english_language %}
  <div class="review-row">
    <label>Title [English]</label>
    <div>{{proposal.title | localize:"en" }}</div>
  </div>
  <div class="review-row">
    <label>Elevator Pitch [English]</label>
    <div>{{proposal.elevator_pitch | localize:"en" | markdownify}}</div>
  </div>
  <div class="review-row">
    <label>Abstract [English]</label>
    <div>{{proposal.abstract | localize:"en" | markdownify}}</div>
  </div>
  {% endif %}
  {% if has_italian_language %}
  <div class="review-row">
    <label>Title [Italian]</label>
    <div>{{proposal.title | localize:"it" }}</div>
  </div>

  <div class="review-row">
    <label>Elevator Pitch [Italian]</label>
    <div>{{proposal.elevator_pitch | localize:"it" | markdownify}}</div>
  </div>
  <div class="review-row">
    <label>Abstract [Italian]</label>
    <div>{{proposal.abstract | localize:"it" | markdownify}}</div>
  </div>
  {% endif %}
  <div class="review-row">
    <label>Notes</label>
    <div>{{proposal.notes}}</div>
  </div>
  <div class="review-row">
    <label>Tags</label>
    <div>{{proposal.tags.all|join:", "}}</div>
  </div>
</fieldset>
<fieldset class="module aligned">
  <h2>Speaker</h2>
  <div class="review-row">
    <label>Name</label>
    <div>{{speaker.fullname}}</div>
  </div>
  <div class="review-row">
    <label>Country</label>
    <div>{{speaker.country | countryname}}</div>
  </div>
  <div class="review-row">
    <label>Requested a grant?</label>
    {% if has_requested_grant %}
    <div>
      <a target="_blank" href="{{grant_link}}">Yes, open grant</a>
    </div>
    {% else %}
    <div>
      No
    </div>
    {% endif %}
  </div>

</fieldset>
<fieldset class="module aligned">
  <h2>Your vote</h2>
  <form
    class="my-vote"
    method="post"
    action="{% url 'admin:reviews-vote-proposal' review_session_id proposal_id %}"
  >
    {% csrf_token %}
    <div class="score-label">Score</div>
    <div class="available-votes">
      {% for available_score in available_scores %}
      <label class="my-vote-radio-wrapper">
        <input {% if user_review.score_id == available_score.id %} checked {% endif %} name="score" type="radio" value="{{ available_score.id }}" />
        {{available_score.label}}
      </label>
      {% endfor %}
    </div>

    <div class="comments-wrapper">
      <label class="comments-wrapper-label">Leave a comment?</label>
      <textarea rows="5" name="comment">{{user_review.comment}}</textarea>
    </div>

    <div class="actions">
      <input value="Vote and go to the next" type="submit" name="_next" />
      <input value="Skip for now" type="submit" name="_skip" />
    </div>
  </form>
</fieldset>
{% endblock %}
