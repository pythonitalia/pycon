#import "../../fragments/submission-accordion.graphql"

query VotingSubmissions(
  $conference: String!
  $after: String
  $loadMore: Boolean!
  $language: String!
  $voted: Boolean
  $tags: [String!]
  $type: String
  $audienceLevel: String
) {
  conference(code: $conference) @skip(if: $loadMore) {
    id
    isVotingOpen
    votingDeadline: deadline(type: "voting") {
      id
      end
    }

    topics {
      id
      name
    }

    languages {
      id
      name
      code
    }

    audienceLevels {
      id
      name
    }

    submissionTypes {
      id
      name
    }
  }

  submissions(
    code: $conference
    after: $after
    language: $language
    voted: $voted
    tags: $tags
    type: $type
    audienceLevel: $audienceLevel
    limit: 10
  ) {
    ...submissionAccordion
  }

  votingTags(conference: $conference) @skip(if: $loadMore) {
    id
    name
  }
}
